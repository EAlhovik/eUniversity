@using eUniversity.Web.Extensions
@model eUniversity.Business.ViewModels.Auth.RegisterViewModel
@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}

<div id="signup-box" class="signup-box widget-box no-border visible">
    <div class="widget-body">
        <div class="widget-main">
            <h4 class="header green lighter bigger">
                <i class="icon-group blue"></i>
                New User Registration
            </h4>

            <div class="space-6"></div>
            <p>Enter your details to begin: </p>
            @using (Html.BeginForm(null, null, null, FormMethod.Post, new { id = "registerForm", Data_Bind = "deferredSubmit: register" }))
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(string.Empty, new { Data_Bind = "css: {'error': isValid}" })
                <fieldset>
                    <div class="form-group" data-bind="validationElement: UserName">
                        <label class="block clearfix">
                            <span class="block input-icon input-icon-right">
                                @Html.TextBoxFor(m => m.UserName, new { @class = "form-control", placeholder = "Username", Data_Bind = "value: UserName" })
                                <i class="icon-user"></i>
                            </span>
                        </label>
                    </div>

                    <div class="form-group" data-bind="validationElement: Password">
                        <label class="block clearfix">
                            <span class="block input-icon input-icon-right">
                                @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "Password", Data_Bind = "value: Password" })
                                <i class="icon-lock"></i>
                            </span>
                        </label>
                    </div>

                    <div class="form-group" data-bind="validationElement: ConfirmPassword">
                        <label class="block clearfix">
                            <span class="block input-icon input-icon-right">
                                @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", placeholder = "Repeat password", Data_Bind = "value: ConfirmPassword" })
                                <i class="icon-retweet"></i>
                            </span>
                        </label>
                    </div>
                    <div class="form-group" data-bind="validationElement: ConfirmPassword">
                        <label class="block clearfix">
                            @Html.EnumDropDownListFor(m=>m.AccountType, new {@class = "form-control", placeholder = "Repeat password"})
                        </label>
                    </div>
                    
                    <div class="space-24"></div>

                    <div class="clearfix">
                        <button type="reset" class="width-30 pull-left btn btn-sm">
                            <i class="icon-refresh"></i>
                            Reset
                        </button>

                        <button type="submit" class="width-65 pull-right btn btn-sm btn-success">
                            Register
                            <i class="icon-arrow-right icon-on-right"></i>
                        </button>
                    </div>
                </fieldset>
            }
        </div>

        <div class="toolbar center">

            <a href="@Url.Action("Login","Account")" class="back-to-login-link">
                <i class="icon-arrow-left"></i>
                Back to login
            </a>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/Scripts/viewModels/account/registerViewModel.js"></script>
    <script type="text/javascript">
        ko.applyBindings(new RegisterViewModel(@Html.Raw(Json.Encode(Model))), $("#registerForm").get(0));
    </script>
    @*    @Scripts.Render("~/bundles/jqueryval")*@
}
